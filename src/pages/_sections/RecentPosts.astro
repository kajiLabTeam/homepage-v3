---
import { Image } from 'astro:assets';

interface Props {
  class?: string;
}

const { class: className, ...props } = Astro.props;

// TODO
const posts = [
  {
    title: '研究室で今年度最後の旅行として京都に行ってきました',
    href: '/posts/[todo]/1',
    thumbnail: 'https://placehold.jp/3d4070/ffffff/960x540.png?text=サムネ',
  },
  {
    title: '2024年度卒論・修論発表が無事に終わりました',
    href: '/posts/[todo]/1',
    thumbnail: 'https://placehold.jp/3d4070/ffffff/960x540.png?text=サムネ',
  },
  {
    title: '卒論おつかれ様会を開催しました',
    href: '/posts/[todo]/1',
    thumbnail: 'https://placehold.jp/3d4070/ffffff/960x540.png?text=サムネ',
  },
  {
    title: '今年も研究室でクリスマス会を行いました',
    href: '/posts/[todo]/1',
    thumbnail: 'https://placehold.jp/3d4070/ffffff/960x540.png?text=サムネ',
  },
  {
    title:
      'U-22 プログラミング・コンテスト2024 で経済産業省商務情報政策局長賞＜テクノロジー＞と、さくらインターネット賞の2つの賞を受賞しました.',
    href: '/posts/[todo]/1',
    thumbnail: 'https://placehold.jp/3d4070/ffffff/960x540.png?text=サムネ',
  },
  {
    title:
      'U-22 プログラミング・コンテスト2024 で経済産業省商務情報政策局長賞＜テクノロジー＞と、さくらインターネット賞の2つの賞を受賞しました.',
    href: '/posts/[todo]/1',
    thumbnail: 'https://placehold.jp/3d4070/ffffff/960x540.png?text=サムネ',
  },
];
---

<div class:list={['posts', className]} {...props}>
  <h2 class="title">最近の投稿</h2>

  {
    posts.map((post) => (
      <a class="post" href={post.href}>
        <h3 class="post-title">{post.title}</h3>
        <Image class="thumbnail" src={post.thumbnail} alt={post.title} width="480" height="270" />
      </a>
    ))
  }
</div>

<style lang="scss">
  .posts {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;

    .title {
      padding-block: 20px 10px;
      grid-column: 1/-1;
      text-align: center;
    }

    .post {
      width: 100%;
      position: relative;
      border-radius: 15px;
      overflow: hidden;
      cursor: pointer;

      .post-title {
        padding: 20px;
        width: fit-content;
        height: fit-content;
        color: $color-text;
        text-align: center;
        position: absolute;
        margin: auto;
        inset: 0;
        line-height: 100%;
        opacity: 0;
        transition: opacity $transition;
        z-index: 1;
      }

      .thumbnail {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: filter $transition;
      }

      &:hover {
        .post-title {
          opacity: 1;
        }

        .thumbnail {
          filter: brightness(3) blur(5px);
        }
      }
    }
  }
</style>
